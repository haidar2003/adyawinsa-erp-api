generator client {
  provider      = "prisma-client-js"
  output        = "./generated/"
  binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model inventory_move_draft {
  org_id             Int
  creation_date_time DateTime @db.Timestamptz(6)
  movement_id        Int      @unique
  data               Json     @db.Json

  @@id([org_id, creation_date_time])
}

model shipment_draft {
  org_id             Int
  creation_date_time DateTime @db.Timestamptz(6)
  erp_id        Int      @unique
  data               Json     @db.Json

  @@id([org_id, creation_date_time])
}

model material_receive_draft {
  org_id             Int
  creation_date_time DateTime @db.Timestamptz(6)
  erp_id        Int      @unique
  data               Json     @db.Json

  @@id([org_id, creation_date_time])
}

model production_single_product_draft {
  org_id             Int
  creation_date_time DateTime @db.Timestamptz(6)
  erp_id        Int      @unique
  data               Json     @db.Json

  @@id([org_id, creation_date_time])
}

model track_id_object {
  track_id                String @id
  productId               Int @default(-1)
  productName             String @default("")
  track_type              String
  creation_date_time      DateTime @unique(sort: Desc) @default(now())
  source_data             Json     @db.Json
  object_data             Json     @db.Json
  track_id_history        track_id_history[]
}

model track_id_history {
  track_id_object           track_id_object @relation(fields: [track_id], references: [track_id])
  track_id                  String
  update_date_time          DateTime @unique(sort: Desc) @default(now())
  description               String @default("")
  data                      Json     @db.Json

  @@id([track_id, update_date_time])
}

model track_id_stock {
  locator_id                  String
  key23                       String
  product_id                  String
  track_id                    String // This is a simple string, we don't make relations for this to speed up the db operations.
  quantity                    Float
  data                        Json     @db.Json

  @@id([locator_id, key23])
}